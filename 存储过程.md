##数据库变量  
### 系统变量：查看时使用两个@@
> show variables  
>- 查看所有系统内置变量  

> select @@变量名  
>- 查看某个系统变量    

> set 变量名 = 值  
>- 修改变量值     
### 自定义变量：查看时使用一个@
> set @变量名 = 值   
> select @变量名  

## 自定义函数
```java
create function funName(参数列表) 
returns 数据类型
begin
// 函数体
//返回值
end 
```  
```java
/**
delimiter是分界符，“DELIMITER //”语句的作用是将MYSQL的结束符设置为//,代表存储过程开始
*/
delimiter //
CREATE FUNCTION adduser(userName VARCHAR(20))
RETURNS INT 
BEGIN
INSERT user(username) VALUES (userName);
/**
 声明局部变量param
*/
declare param varchar(30); 
set param = userName;
return param;
END
//
/**
存储过程定义完毕之后再使用DELIMITER ;恢复默认结束符
*/
delimiter ;
```   
**调用函数：** `select func2();`

## 存储过程  
1. 创建存储过程:  
```java
create procedure proceduserName(in/out/inout 参数名 参数数据类型) 
begin
//过程体
end
``` 
2. 调用存储过程:
```java
call proceduserName(@param1,@param2)
``` 
3.删除存储过程:
```java
drop procedure proceduserName
drop procedure if exists proced_name;  //先判断是否有Proc() 这个存储过程，有就drop掉
```  
> show procedure status 
>- 显示数据库中所有存储的存储过程基本信息，包括所属数据库，存储过程名称，创建时间等

> show create procedure Procedure_Name 
>- 显示存储过程Procedure_Name的详细信息   

4.存储过程创建方式三种:    
> cmd命令行方式  
>- 
```java
//创建不带参数的存储过程：
create procedure selectAll() select * from user;

//创建带有IN类型参数的存储过程：
create procedure deleteById(IN p_id int(2))
BEGIN
delete from user where id = p_id;
END
call deleteById(9);

//创建带有IN和OUT类型参数的存储过程,这是一个有输入值和返回值的存储过程:
create procedure del_query()
begin
delect from user where phone=p_phone;
select count(uid) from user into p_sum;
end   
创建带有多个OUT类型的存储过程:
create procedure mix_operate(in p_age int(2), out deleteHang int(5), out countHang int(5))
begin
delete from user where age=p_age;
select row_count() into deleteHang;
select count(uid) from user into countHang;
end
//call mix_operate(23,@a,@b); 
//select @a,@b;
``` 
**一个从创建到调用，到显示结果的完整示例：**  
DELIMITER //     
CREATE PROCEDURE removeUserAndReturnUserNums(IN p_id INT,OUT userNums)    
BEGIN     
DELETE FROM imooc_goddess WHERE id = p_id;  
SELECT COUNT(id) FROM imooc_goddess INTO userNums;       
END     
DELIMITER ;     
`call removeUserAndReturnUserNums(6,@userNums);`  
`select @userNames;`   

> Navicat 新建查询  
1. 
```java
create  procedure vv1() select version(); //查看sql版本  
create procedure vv2() select COUNT(*) into param from t_ms_user  //统计表中的总记录数
```
2. 
```java
call vv1();
call vv2();
``` 
> Navicat 新建函数  
```java
BEGIN
//过程体
END
```




